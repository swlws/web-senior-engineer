# ç­–ç•¥æ¨¡å¼

## ðŸ’¡ ç¤ºä¾‹ä¸€ï¼šæ”¯ä»˜ç­–ç•¥

```js
// æŠ½è±¡ç­–ç•¥æŽ¥å£ï¼ˆåœ¨ JS ä¸­ç”¨å¯¹è±¡å®žçŽ°ï¼‰
class PaymentStrategy {
  pay(amount) {
    throw new Error('pay() must be implemented');
  }
}

// å…·ä½“ç­–ç•¥ï¼šæ”¯ä»˜å®
class AlipayStrategy extends PaymentStrategy {
  pay(amount) {
    console.log(`ä½¿ç”¨æ”¯ä»˜å®æ”¯ä»˜ Â¥${amount}`);
  }
}

// å…·ä½“ç­–ç•¥ï¼šå¾®ä¿¡æ”¯ä»˜
class WeChatPayStrategy extends PaymentStrategy {
  pay(amount) {
    console.log(`ä½¿ç”¨å¾®ä¿¡æ”¯ä»˜ Â¥${amount}`);
  }
}

// ä¸Šä¸‹æ–‡
class PaymentContext {
  setStrategy(strategy) {
    this.strategy = strategy;
  }

  pay(amount) {
    if (!this.strategy) throw new Error('æœªè®¾ç½®æ”¯ä»˜ç­–ç•¥');
    this.strategy.pay(amount);
  }
}

// ä½¿ç”¨
const context = new PaymentContext();

context.setStrategy(new AlipayStrategy());
context.pay(100);

context.setStrategy(new WeChatPayStrategy());
context.pay(200);
```

## ðŸ’¡ ç¤ºä¾‹äºŒï¼šä½¿ç”¨å‡½æ•°å¼å†™æ³•ï¼ˆæ›´ JS é£Žæ ¼ï¼‰

```js
const strategies = {
  alipay: (amount) => console.log(`ä½¿ç”¨æ”¯ä»˜å®æ”¯ä»˜ Â¥${amount}`),
  wechat: (amount) => console.log(`ä½¿ç”¨å¾®ä¿¡æ”¯ä»˜ Â¥${amount}`),
  bank: (amount) => console.log(`ä½¿ç”¨é“¶è¡Œå¡æ”¯ä»˜ Â¥${amount}`)
};

function pay(type, amount) {
  const strategy = strategies[type];
  if (!strategy) throw new Error('æœªçŸ¥æ”¯ä»˜æ–¹å¼');
  strategy(amount);
}

// ä½¿ç”¨
pay('alipay', 100);
pay('bank', 300);
```

## ðŸ’¡ ç¤ºä¾‹ä¸‰ï¼šè¡¨å•æ ¡éªŒç­–ç•¥ï¼ˆå®žæˆ˜å¸¸ç”¨ï¼‰

```js
const validators = {
  isNonEmpty: (value) => value.trim() !== '',
  minLength: (value, length) => value.length >= length,
  isEmail: (value) => /\S+@\S+\.\S+/.test(value)
};

function validate(value, rules) {
  return rules.every(([rule, ...args]) => validators[rule](value, ...args));
}

// ä½¿ç”¨
console.log(validate('test@example.com', [['isNonEmpty'], ['isEmail']])); // true
console.log(validate('abc', [['minLength', 5]])); // false
```
