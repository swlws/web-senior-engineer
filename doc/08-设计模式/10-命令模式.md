# ÂëΩ‰ª§Ê®°Âºè

> ÂëΩ‰ª§Ê®°Âºè = Êää‚ÄúÊìç‰Ωú‚ÄùÂèòÊàêÁã¨Á´ãÂØπË±°ÔºåÂèØÈöèÊó∂ÊâßË°å„ÄÅÊí§ÈîÄÊàñÊéíÈòü„ÄÇ

üéØ ÈÄÇÁî®Âú∫ÊôØ

ÂëΩ‰ª§Ê®°ÂºèÂ∏∏Áî®‰∫é‰ª•‰∏ãÂú∫ÊôØÔºö

- ÈúÄË¶ÅÊîØÊåÅ„ÄåÊí§ÈîÄ / ÈáçÂÅö„Äç
- ÈúÄË¶ÅÊîØÊåÅ„Äå‰ªªÂä°ÈòüÂàó„ÄçÊàñ„ÄåÂÆèÂëΩ‰ª§„ÄçÔºàÊâπÈáèÊìç‰ΩúÔºâ
- ÈúÄË¶ÅÂ∞Ü‚ÄúÊìç‰Ωú‚Äù‰∏é‚ÄúË∞ÉÁî®ËÄÖ‚ÄùËß£ËÄ¶
- ÊØîÂ¶ÇÔºö
  - ÁºñËæëÂô®‰∏≠ÁöÑÊí§ÈîÄ/ÈáçÂÅöÂäüËÉΩ
  - Ê∏∏Êàè‰∏≠ÁöÑÊåá‰ª§ÊéßÂà∂ÔºàÁßªÂä®„ÄÅÊîªÂáª„ÄÅË∑≥Ë∑ÉÔºâ
  - GUI ÊåâÈíÆÁªëÂÆö‰∏çÂêåÂëΩ‰ª§
  - ËØ∑Ê±ÇÊéíÈòüÊâßË°åÔºàÂ¶ÇÊâìÂç∞Êú∫‰ªªÂä°ÈòüÂàóÔºâ

## üîß Ê®°ÂºèÁªìÊûÑ

| ËßíËâ≤                        | ËØ¥Êòé                                  |
| ------------------------- | ----------------------------------- |
| **CommandÔºàÂëΩ‰ª§Êé•Âè£Ôºâ**         | ÂÆö‰πâÁªü‰∏ÄÁöÑÊâßË°åÊñπÊ≥ïÔºàÂ¶Ç `execute()` / `undo()`Ôºâ |
| **ConcreteCommandÔºàÂÖ∑‰ΩìÂëΩ‰ª§Ôºâ** | Â∞ÅË£ÖÂÆûÈôÖÁöÑËØ∑Ê±ÇÊìç‰Ωú                           |
| **ReceiverÔºàÊé•Êî∂ËÄÖÔºâ**         | ÁúüÊ≠£ÊâßË°åÊìç‰ΩúÁöÑÂØπË±°                           |
| **InvokerÔºàË∞ÉÁî®ËÄÖÔºâ**          | Ëß¶ÂèëÂëΩ‰ª§ÊâßË°åÔºå‰∏çÂÖ≥ÂøÉÂëΩ‰ª§ÁªÜËäÇ                      |
| **ClientÔºàÂÆ¢Êà∑Á´ØÔºâ**           | ÂàõÂª∫ÂëΩ‰ª§Âπ∂ÊåáÂÆöÊé•Êî∂ËÄÖ                          |

## üí° Á§∫‰æã‰∏ÄÔºöÁÆÄÂçïÂëΩ‰ª§ÊâßË°å

```js
// Êé•Êî∂ËÄÖÔºöÁîµËßÜ
class TV {
  turnOn() {
    console.log('üì∫ ÁîµËßÜÂ∑≤ÊâìÂºÄ');
  }

  turnOff() {
    console.log('üì¥ ÁîµËßÜÂ∑≤ÂÖ≥Èó≠');
  }
}

// ÂëΩ‰ª§Êé•Âè£
class Command {
  execute() {}
  undo() {}
}

// ÂÖ∑‰ΩìÂëΩ‰ª§ÔºöÊâìÂºÄÁîµËßÜ
class TurnOnCommand extends Command {
  constructor(tv) {
    super();
    this.tv = tv;
  }

  execute() {
    this.tv.turnOn();
  }

  undo() {
    this.tv.turnOff();
  }
}

// ÂÖ∑‰ΩìÂëΩ‰ª§ÔºöÂÖ≥Èó≠ÁîµËßÜ
class TurnOffCommand extends Command {
  constructor(tv) {
    super();
    this.tv = tv;
  }

  execute() {
    this.tv.turnOff();
  }

  undo() {
    this.tv.turnOn();
  }
}

// Ë∞ÉÁî®ËÄÖÔºöÈÅ•ÊéßÂô®
class RemoteControl {
  submit(command) {
    command.execute();
    this.lastCommand = command;
  }

  undo() {
    this.lastCommand?.undo();
  }
}

// ‰ΩøÁî®
const tv = new TV();
const onCommand = new TurnOnCommand(tv);
const offCommand = new TurnOffCommand(tv);

const remote = new RemoteControl();

remote.submit(onCommand); // üì∫ ÁîµËßÜÂ∑≤ÊâìÂºÄ
remote.undo();            // üì¥ ÁîµËßÜÂ∑≤ÂÖ≥Èó≠
```

## üí° Á§∫‰æã‰∫åÔºöÂëΩ‰ª§ÈòüÂàóÔºà‰ªªÂä°ÊéíÈòüÊâßË°åÔºâ

```js
class CommandQueue {
  constructor() {
    this.queue = [];
  }

  add(command) {
    this.queue.push(command);
  }

  run() {
    for (const cmd of this.queue) {
      cmd.execute();
    }
  }
}

// Á§∫‰æãÂëΩ‰ª§
class SayCommand {
  constructor(message) {
    this.message = message;
  }

  execute() {
    console.log(this.message);
  }
}

// ‰ΩøÁî®
const queue = new CommandQueue();
queue.add(new SayCommand('üëã Hello'));
queue.add(new SayCommand('üöÄ World'));
queue.run();
```

## üí° Á§∫‰æã‰∏âÔºöÊí§ÈîÄ‰∏éÈáçÂÅöÔºàÁºñËæëÂô®Âú∫ÊôØÔºâ

```js
class Editor {
  constructor() {
    this.text = '';
  }

  write(text) {
    this.text += text;
  }

  undo(text) {
    this.text = this.text.slice(0, -text.length);
  }

  show() {
    console.log(this.text);
  }
}

class WriteCommand {
  constructor(editor, text) {
    this.editor = editor;
    this.text = text;
  }

  execute() {
    this.editor.write(this.text);
  }

  undo() {
    this.editor.undo(this.text);
  }
}

// ÂëΩ‰ª§ÁÆ°ÁêÜÂô®
class CommandManager {
  constructor() {
    this.history = [];
  }

  execute(command) {
    command.execute();
    this.history.push(command);
  }

  undo() {
    const cmd = this.history.pop();
    cmd?.undo();
  }
}

// ‰ΩøÁî®
const editor = new Editor();
const manager = new CommandManager();

manager.execute(new WriteCommand(editor, 'Hello '));
manager.execute(new WriteCommand(editor, 'World!'));
editor.show(); // Hello World!

manager.undo();
editor.show(); // Hello
```

## üí° Á§∫‰æãÂõõÔºöÂÆûÈôÖÂ∫îÁî®ÔºàVue/React ÂèØÁî®Ôºâ

ÂâçÁ´ØÁªÑ‰ª∂ÁöÑÊí§ÈîÄÊìç‰ΩúÔºàÊØîÂ¶ÇÊãñÊãΩÁªÑ‰ª∂ÔºâÔºö

```js
// ÈÄöÁî®ÂëΩ‰ª§Âü∫Á±ª
class MoveCommand {
  constructor(component, prevPos, newPos) {
    this.component = component;
    this.prevPos = prevPos;
    this.newPos = newPos;
  }

  execute() {
    this.component.setPosition(this.newPos);
  }

  undo() {
    this.component.setPosition(this.prevPos);
  }
}

// ‰ΩøÁî®Êó∂
const history = [];
const comp = { setPosition: (pos) => console.log('ÁªÑ‰ª∂‰ΩçÁΩÆ', pos) };

const moveCmd = new MoveCommand(comp, { x: 0, y: 0 }, { x: 100, y: 100 });
moveCmd.execute(); // ÁªÑ‰ª∂‰ΩçÁΩÆ {x: 100, y: 100}
history.push(moveCmd);

// Êí§ÈîÄ
history.pop().undo(); // ÁªÑ‰ª∂‰ΩçÁΩÆ {x: 0, y: 0}
```
