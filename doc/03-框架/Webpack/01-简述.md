# Webpack ç®€è¿°

Webpack æ˜¯ä¸€ä¸ª ç°ä»£ JavaScript åº”ç”¨çš„é™æ€æ¨¡å—æ‰“åŒ…å·¥å…·ã€‚å½“ webpack å¤„ç†åº”ç”¨æ—¶ï¼Œå®ƒä¼šä»å…¥å£æ–‡ä»¶å‡ºå‘ï¼Œé€’å½’æ„å»ºä¾èµ–å›¾ï¼Œå°†é¡¹ç›®ä¸­å„ç§èµ„æºï¼ˆJSã€CSSã€å›¾ç‰‡ç­‰ï¼‰æ‰“åŒ…æˆé™æ€æ–‡ä»¶ä¾›æµè§ˆå™¨ä½¿ç”¨ã€‚

## ğŸ”§ ä¸€å¥è¯æ€»ç»“

Webpack å°±æ˜¯æŠŠé¡¹ç›®ä¸­æ‰€æœ‰èµ„æºï¼ˆJSã€CSSã€å›¾ç‰‡ç­‰ï¼‰è§†ä¸ºæ¨¡å—ï¼Œæ‰“åŒ…æˆé€‚åˆæµè§ˆå™¨è¿è¡Œçš„ä¼˜åŒ–åçš„æ–‡ä»¶ã€‚

## ğŸ§± æ ¸å¿ƒæ¦‚å¿µ

| åç§°                 | è¯´æ˜                                                    |
| -------------------- | ------------------------------------------------------- |
| **Entryï¼ˆå…¥å£ï¼‰**    | æŒ‡å®šæ‰“åŒ…çš„èµ·ç‚¹ï¼ˆå¦‚ `index.js`ï¼‰                         |
| **Outputï¼ˆè¾“å‡ºï¼‰**   | é…ç½®æ‰“åŒ…åæ–‡ä»¶çš„è¾“å‡ºè·¯å¾„ä¸æ–‡ä»¶å                        |
| **Loaderï¼ˆåŠ è½½å™¨ï¼‰** | ç”¨äºå°†é JS æ–‡ä»¶ï¼ˆå¦‚ CSSã€å›¾ç‰‡ï¼‰è½¬æ¢ä¸ºæ¨¡å—              |
| **Pluginï¼ˆæ’ä»¶ï¼‰**   | ç”¨äºæ‰§è¡Œæ›´å¤æ‚çš„æ„å»ºä»»åŠ¡ï¼ˆå¦‚å‹ç¼©ã€æ³¨å…¥ HTMLã€æå– CSSï¼‰ |
| **Mode**             | å¼€å‘æ¨¡å¼ï¼ˆdevelopmentï¼‰æˆ–ç”Ÿäº§æ¨¡å¼ï¼ˆproductionï¼‰         |
| **DevServer**        | æä¾›å¼€å‘ç¯å¢ƒçš„çƒ­æ›´æ–°æœåŠ¡                                |

## ğŸ”— æ¨¡å—åŒ–æ”¯æŒ

Webpack æ”¯æŒå¤šç§æ¨¡å—åŒ–æ–¹æ¡ˆï¼š

- CommonJS (require, module.exports)
- ES Module (import, export)
- AMDã€UMD

## ğŸ“¦ å¸¸è§ Loader ç¤ºä¾‹

| ç±»å‹           | Loader                                       |
| -------------- | -------------------------------------------- |
| å¤„ç† CSS       | `css-loader`, `style-loader`                 |
| ç¼–è¯‘ Sass      | `sass-loader`                                |
| å¤„ç†å›¾ç‰‡       | `file-loader`, `url-loader`, `asset modules` |
| è½¬è¯‘ JS        | `babel-loader`ï¼ˆæ”¯æŒ ES6+/JSXï¼‰              |
| å¤„ç† Vue/React | `vue-loader`, `babel-loader`                 |

## ğŸ”Œ å¸¸è§ Plugin ç¤ºä¾‹

| æ’ä»¶                         | åŠŸèƒ½                                     |
| ---------------------------- | ---------------------------------------- |
| `HtmlWebpackPlugin`          | è‡ªåŠ¨ç”Ÿæˆ `index.html` å¹¶æ³¨å…¥æ‰“åŒ…åçš„èµ„æº |
| `MiniCssExtractPlugin`       | æŠ½ç¦» CSS æ–‡ä»¶                            |
| `DefinePlugin`               | å®šä¹‰å…¨å±€å¸¸é‡                             |
| `HotModuleReplacementPlugin` | å®ç°çƒ­æ›´æ–°                               |
| `CleanWebpackPlugin`         | æ¯æ¬¡æ„å»ºå‰æ¸…ç©ºè¾“å‡ºç›®å½•                   |

## ğŸš€ ä¼˜åŠ¿

- æ¨¡å—åŒ–æ‰“åŒ…ï¼šæ”¯æŒå¤šç§æ¨¡å—ç³»ç»Ÿ
- æ‰©å±•æ€§å¼ºï¼šLoader + Plugin æ’ä»¶æœºåˆ¶éå¸¸çµæ´»
- é€‚åˆå¤§å‹é¡¹ç›®ï¼šæ”¯æŒä»£ç åˆ†å‰²ã€æ‡’åŠ è½½ã€Tree Shaking ç­‰é«˜çº§ç‰¹æ€§
- ç”Ÿæ€ä¸°å¯Œï¼šReactã€Vueã€Angular ç­‰ä¸»æµæ¡†æ¶å‡æ¨èä½¿ç”¨

## ğŸ“ ç¤ºä¾‹é…ç½®ï¼ˆwebpack.config.jsï¼‰

```javascript
const path = require("path");
const HtmlWebpackPlugin = require("html-webpack-plugin");

module.exports = {
  entry: "./src/index.js", // å…¥å£
  output: {
    path: path.resolve(__dirname, "dist"), // è¾“å‡ºç›®å½•
    filename: "bundle.js", // è¾“å‡ºæ–‡ä»¶å
  },
  module: {
    rules: [
      { test: /\.css$/, use: ["style-loader", "css-loader"] }, // åŠ è½½ CSS
      { test: /\.js$/, exclude: /node_modules/, use: "babel-loader" }, // è½¬è¯‘ JS
    ],
  },
  plugins: [
    new HtmlWebpackPlugin({ template: "./public/index.html" }), // è‡ªåŠ¨æ³¨å…¥ HTML
  ],
  mode: "development", // æˆ– 'production'
};
```

## ğŸ§  æ€»ç»“

Webpack æ˜¯ç°ä»£å‰ç«¯æ„å»ºçš„åŸºç¡€è®¾æ–½æ ¸å¿ƒä¹‹ä¸€ï¼Œæ”¯æŒä»å¼€å‘åˆ°ä¸Šçº¿çš„æ•´ä¸ªæµç¨‹ï¼š

- å¼€å‘æ—¶ï¼šæ¨¡å—çƒ­æ›¿æ¢ã€æºæ˜ å°„ã€å¼€å‘æœåŠ¡å™¨ç­‰æé«˜æ•ˆç‡
- æ„å»ºæ—¶ï¼šTree Shakingã€ä»£ç æ‹†åˆ†ã€å‹ç¼©ä¼˜åŒ–ã€æ¨¡å—è”é‚¦ç­‰æ”¯æŒå¤§å‹é¡¹ç›®æ„å»º
- å‘å¸ƒæ—¶ï¼šå¯æ‰©å±•çš„æ’ä»¶ä½“ç³»æ”¯æŒå„ç§åœºæ™¯
