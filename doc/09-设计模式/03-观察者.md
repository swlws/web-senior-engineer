# 观察者模式

## 实现

```js
// 被观察者（Subject）
class Subject {
  constructor() {
    this.observers = [] // 存储观察者
  }

  // 添加观察者
  attach(observer) {
    if (observer && typeof observer.update === 'function') {
      this.observers.push(observer)
    }
  }

  // 移除观察者
  detach(observer) {
    this.observers = this.observers.filter(o => o !== observer)
  }

  // 通知所有观察者
  notify(data) {
    this.observers.forEach(observer => observer.update(data))
  }
}

// 观察者（Observer）
class Observer {
  constructor(name) {
    this.name = name
  }

  // 被通知时执行的逻辑
  update(data) {
    console.log(`${this.name} 收到通知：`, data)
  }
}

// 使用示例
const subject = new Subject()

const observer1 = new Observer('观察者A')
const observer2 = new Observer('观察者B')

subject.attach(observer1)
subject.attach(observer2)

subject.notify('数据发生变化')
// 输出：
// 观察者A 收到通知： 数据发生变化
// 观察者B 收到通知： 数据发生变化

subject.detach(observer1)
subject.notify('再次变化')
// 输出：
// 观察者B 收到通知： 再次变化
```
