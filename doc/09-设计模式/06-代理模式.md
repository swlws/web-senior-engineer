# ä»£ç†æ¨¡å¼

## ğŸ’¡ ç¤ºä¾‹ä¸€ï¼šåŸºç¡€ä»£ç†

```js
// çœŸå®ä¸»é¢˜
class RealImage {
  constructor(filename) {
    this.filename = filename;
  }

  display() {
    console.log(`æ˜¾ç¤ºå›¾ç‰‡ï¼š${this.filename}`);
  }
}

// ä»£ç†å¯¹è±¡
class ProxyImage {
  constructor(filename) {
    this.realImage = null;
    this.filename = filename;
  }

  display() {
    if (!this.realImage) {
      console.log('é¦–æ¬¡åŠ è½½å›¾ç‰‡ï¼Œåˆ›å»ºçœŸå®å¯¹è±¡...');
      this.realImage = new RealImage(this.filename);
    }
    this.realImage.display();
  }
}

// ä½¿ç”¨
const img = new ProxyImage('photo.png');
img.display(); // é¦–æ¬¡åŠ è½½
img.display(); // ç›´æ¥æ˜¾ç¤ºï¼ˆæ— é¡»é‡æ–°åŠ è½½ï¼‰
```

## ğŸ’¡ ç¤ºä¾‹äºŒï¼šJS å®é™…åº”ç”¨ï¼ˆç½‘ç»œè¯·æ±‚ä»£ç†ï¼‰

```js
function fetchData(url) {
  console.log('è¯·æ±‚æ¥å£ï¼š', url);
  return `${url} çš„æ•°æ®`;
}

const cacheProxy = (() => {
  const cache = new Map();

  return (url) => {
    if (cache.has(url)) {
      console.log('ä»ç¼“å­˜ä¸­è·å–ï¼š', url);
      return cache.get(url);
    }
    const result = fetchData(url);
    cache.set(url, result);
    return result;
  };
})();

// ä½¿ç”¨
cacheProxy('api/user'); // è¯·æ±‚æ¥å£
cacheProxy('api/user'); // ä»ç¼“å­˜ä¸­è·å–
```

## ğŸ’¡ ç¤ºä¾‹ä¸‰ï¼šES6 Proxy å®ç°æ•°æ®åŠ«æŒ

```js
const user = { name: 'Alice', age: 25 };

const proxyUser = new Proxy(user, {
  get(target, key) {
    console.log(`è¯»å–å±æ€§ï¼š${key}`);
    return target[key];
  },
  set(target, key, value) {
    console.log(`ä¿®æ”¹å±æ€§ï¼š${key} = ${value}`);
    target[key] = value;
    return true;
  }
});

// ä½¿ç”¨
proxyUser.name;       // è¯»å–å±æ€§ï¼šname
proxyUser.age = 30;   // ä¿®æ”¹å±æ€§ï¼šage = 30
```
