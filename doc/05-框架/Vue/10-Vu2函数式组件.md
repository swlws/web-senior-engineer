# Vue2 å‡½æ•°å¼ç»„ä»¶

åœ¨ Vue 2 é‡Œï¼Œç»„ä»¶çš„ functional: true/false æ˜¯ä¸€ä¸ªå¾ˆå…³é”®çš„é…ç½®ï¼Œå†³å®šäº†ç»„ä»¶æ˜¯ä¸æ˜¯ å‡½æ•°å¼ç»„ä»¶ã€‚å®ƒå¯¹ render çš„æ‰§è¡Œå’Œç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæœ‰ç›´æ¥å½±å“ã€‚

## ğŸ“Œ åŒºåˆ«æ€»ç»“

### 1. functional: falseï¼ˆé»˜è®¤å€¼ï¼‰

- æ™®é€šç»„ä»¶ã€‚
- ä¼šåˆ›å»ºä¸€ä¸ª Vue å®ä¾‹ï¼ˆthis æŒ‡å‘ç»„ä»¶å®ä¾‹ï¼‰ã€‚
- å¯ä»¥ä½¿ç”¨ï¼š
  - data / computed / watch / methods / ç”Ÿå‘½å‘¨æœŸé’©å­
  - this.$props / this.$slots / this.$scopedSlots / this.$emit / this.$listeners / this.$refs
- render å‡½æ•°ç­¾åï¼š

    ```js
    render(h) {
      return h('div', {}, this.$slots.default)
    }
    ```

    è¿™é‡Œçš„ this å°±æ˜¯ç»„ä»¶å®ä¾‹ã€‚

- âœ… é€‚åˆéœ€è¦çŠ¶æ€ã€å“åº”å¼ã€ç”Ÿå‘½å‘¨æœŸçš„åœºæ™¯ã€‚
- âŒ é¢å¤–æœ‰å®ä¾‹å¼€é”€ï¼ˆæ€§èƒ½ç¨å·®äºå‡½æ•°å¼ç»„ä»¶ï¼‰ã€‚

### 2. functional: true

- å‡½æ•°å¼ç»„ä»¶ã€‚
- ä¸ä¼šåˆ›å»º Vue å®ä¾‹ï¼ˆæ²¡æœ‰ thisï¼‰ã€‚
- å®Œå…¨æ˜¯æ— çŠ¶æ€ã€æ— å®ä¾‹çš„æ¸²æŸ“å‡½æ•°ã€‚
- æ¸²æŸ“æ›´å¿«ï¼Œå ç”¨å†…å­˜æ›´å°‘ã€‚
- render å‡½æ•°ç­¾åï¼š

  ```js
    export default {
    functional: true,
    render(h, context) {
      // context åŒ…å«æ‰€æœ‰æ•°æ®
      // context.props
      // context.slots()
      // context.scopedSlots
      // context.data
      // context.listeners
      // context.parent
      return h('div', {}, context.slots().default)
    }
  }
  ```

- æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œåªèƒ½ä¾èµ–å¤–éƒ¨ä¼ å…¥çš„ props/slotsã€‚

- âœ… é€‚åˆâ€œçº¯å±•ç¤ºç»„ä»¶â€ã€â€œåŒ…è£…ç»„ä»¶â€ã€â€œé«˜é˜¶ç»„ä»¶â€ã€‚
- âŒ ä¸èƒ½æœ‰æœ¬åœ°çŠ¶æ€ï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸã€‚

## ğŸ“Œ å¯¹ render çš„å½±å“

| ç‰¹æ€§                    | `functional: false`                    | `functional: true`                           |
| --------------------- | -------------------------------------- | -------------------------------------------- |
| `this`                | æŒ‡å‘ Vue ç»„ä»¶å®ä¾‹                            | **ä¸å­˜åœ¨**ï¼Œæ”¹ç”¨ `context` å‚æ•°                      |
| `data`/`methods`      | å¯ä»¥å®šä¹‰å¹¶åœ¨ `this` ä¸­è®¿é—®                      | **ä¸æ”¯æŒ**ï¼Œå¿…é¡»ä¾èµ–å¤–éƒ¨ props                         |
| ç”Ÿå‘½å‘¨æœŸé’©å­                | å…¨éƒ¨æ”¯æŒ                                   | **ä¸æ”¯æŒ**                                      |
| `slots`/`scopedSlots` | é€šè¿‡ `this.$slots` / `this.$scopedSlots` | é€šè¿‡ `context.slots()` / `context.scopedSlots` |
| æ€§èƒ½                    | å¤šä¸€å±‚å®ä¾‹ï¼Œç¨æ…¢                               | æ›´è½»é‡ã€æ¸²æŸ“æ›´å¿«                                     |
