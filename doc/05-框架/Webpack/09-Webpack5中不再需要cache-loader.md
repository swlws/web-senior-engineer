# Webpack5 ä¸­ä¸å†éœ€è¦ cache-loader

Webpack5 åŸºæœ¬ä¸éœ€è¦å†ç”¨ cache-loaderï¼Œä¹Ÿä¸æ¨èç»§ç»­ä½¿ç”¨ã€‚

Webpack5 å†…ç½®äº†æ›´å¼ºã€è‡ªåŠ¨åŒ–ã€å¼€ç®±å³ç”¨çš„ç¼“å­˜æœºåˆ¶ï¼ˆFilesystem Cacheï¼‰ï¼Œå®Œå…¨å–ä»£äº†è¿‡å»çš„ cache-loaderã€hard-source-webpack-plugin è¿™äº›æ—§æ—¶ä»£ä¼˜åŒ–æ–¹æ¡ˆã€‚

## 1. Webpack5 å†…ç½®äº† æŒä¹…åŒ–ç¼“å­˜ï¼ˆPersistent Cachingï¼‰

åœ¨ `module.rules.use` ä¸­æ‰§è¡Œçš„ æ‰€æœ‰ loader çš„ç»“æœ éƒ½ä¼šè‡ªåŠ¨ç¼“å­˜åˆ°ç£ç›˜ï¼ˆé™¤é loader æ˜¾å¼å£°æ˜ç¦ç”¨ï¼‰ã€‚

ä¸éœ€è¦ä½ æ‰‹åŠ¨åŠ å…¥ `cache-loader`ã€‚

å¼€å¯æ–¹å¼è¶…çº§ç®€å•ï¼ˆé€šå¸¸è„šæ‰‹æ¶å·²ç»é»˜è®¤å¼€å¯ï¼‰ï¼š

```js
module.exports = {
  cache: {
    type: "filesystem",
  },
};
```

Webpack5 ä¼šæŠŠ loader ç¼–è¯‘åçš„ç»“æœç¼“å­˜åˆ°ï¼š

```bash
node_modules/.cache/webpack/
```

å’Œ cache-loader æä¾›çš„åŠŸèƒ½ä¸€æ ·ï¼Œä½†ï¼š

- æ€§èƒ½æ›´å¥½
- è‡ªåŠ¨å¥æŸ„ç¼“å­˜å¤±æ•ˆ
- ä¸ loader æ·±åº¦é›†æˆ
- ä¸éœ€è¦ä½ ç»´æŠ¤ cachePath
- ä¸éœ€è¦æ”¹ loader é…ç½®é¡ºåº

## 2. å®˜æ–¹æ˜ç¡®æ ‡æ³¨ â€œcache-loader å·²è¢«åºŸå¼ƒç”¨é€”â€

`cache-loader` çš„ä½œè€…åœ¨ README ä¸­å·²ç»æ³¨æ˜ï¼š

> âš ï¸ For Webpack5, using cache-loader is NOT needed. Please use built-in persistent caching.

æ‰€ä»¥ç»§ç»­ç”¨å®ƒåè€Œæˆäº†è´Ÿæ‹…ã€‚

## 3. Webpack5 çš„ç¼“å­˜è¦†ç›–é¢æ›´å¹¿

cache-loader åªèƒ½ç¼“å­˜ loader çš„å¤„ç†ç»“æœã€‚

Webpack5 çš„ filesystem cache ç¼“å­˜çš„æ˜¯ï¼š

| ç¼“å­˜é¡¹                            | cache-loader æ”¯æŒ | Webpack5 å†…ç½®æ”¯æŒ |
| --------------------------------- | ----------------- | ----------------- |
| loader ç¼–è¯‘ç»“æœ                   | âœ”                 | âœ”                 |
| module graphï¼ˆä¾èµ–å›¾ï¼‰            | âœ–                 | âœ”                 |
| ç¼–è¯‘ç»“æœï¼ˆchunks, assetsï¼‰        | âœ–                 | âœ”                 |
| è§£æï¼ˆresolveï¼‰ç»“æœ               | âœ–                 | âœ”                 |
| å†…ç½® loaderï¼ˆbabelã€tsã€sass ç­‰ï¼‰ | éœ€è¦é€ä¸ªåŠ         | è‡ªåŠ¨ä½œç”¨å…¨éƒ¨      |

Webpack5 ç¼“å­˜çš„ç²’åº¦å’ŒèŒƒå›´éƒ½æ¯” cache-loader å¤§å¤ªå¤šã€‚

## 4. Webpack5 è‡ªåŠ¨åšå†…å®¹å“ˆå¸Œ â†’ è‡ªåŠ¨ç¼“å­˜å¤±æ•ˆ

å½“ loader é…ç½®å˜åŒ–ã€webpack ç‰ˆæœ¬å˜åŒ–ã€æ–‡ä»¶æ”¹å˜æ—¶ï¼ŒWebpack5 è‡ªåŠ¨å¤„ç†ï¼š

- ç¼“å­˜å¤±æ•ˆ
- é‡å»ºç¼“å­˜
- å±€éƒ¨ç¼“å­˜æ›´æ–°

è€Œ cache-loader å¸¸å¸¸ä¼šé‡åˆ°ï¼š

- ç¼“å­˜ä¸æ›´æ–°
- cache key ä¸ä¸€è‡´
- é…ç½®å˜äº†ä½†ç¼“å­˜æ²¡å¤±æ•ˆ

## ğŸ¯ ç»“è®º

- â¤ Webpack5 ä¸­ä¸è¦å†ç”¨ cache-loader
- â¤ ç›´æ¥ä½¿ç”¨å†…ç½®æ–‡ä»¶ç³»ç»Ÿç¼“å­˜å³å¯
- â¤ ç¼“å­˜èŒƒå›´æ›´å¹¿ã€ç¨³å®šæ€§æ›´å¥½ã€æ€§èƒ½æ›´å¼º
