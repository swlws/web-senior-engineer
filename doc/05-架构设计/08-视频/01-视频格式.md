# 视频格式

视频压缩格式（或者说视频编码格式 / 视频编解码器，codec）之间的区别主要体现在以下几个维度：压缩效率、兼容性、编码复杂度、画质表现、以及是否开源/授权费用等。下面我会系统地讲清楚不同视频格式的区别和应用场景 👇

## 🧩 一、基本概念区分

| 名称                          | 含义                 | 举例                                       |
| --------------------------- | ------------------ | ---------------------------------------- |
| **容器格式 (Container Format)** | 封装视频流、音频流、字幕等数据的外壳 | `.mp4`, `.mkv`, `.mov`, `.avi`, `.flv`   |
| **编码格式 / 压缩标准 (Codec)**     | 决定视频如何被压缩与解压       | `H.264`, `H.265`, `VP9`, `AV1`, `MPEG-2` |

👉 举例说明：

一个 .mp4 文件其实是一个容器，里面可能装着：

- 视频流（H.264 编码）
- 音频流（AAC 编码）
- 字幕流（SRT/ASS）
- 元数据（封面、时长等）

## 🧠 二、常见视频压缩格式对比

| 编码格式                    | 全称                             | 压缩效率    | 画质表现    | 兼容性           | 编码复杂度 | 授权/专利情况   | 典型场景                   |
| ----------------------- | ------------------------------ | ------- | ------- | ------------- | ----- | --------- | ---------------------- |
| **H.264 (AVC)**         | Advanced Video Coding          | ★★★     | ★★★★    | ✅ 非常好         | 中等    | 有专利（多数免费） | 主流视频（YouTube、MP4、流媒体）  |
| **H.265 (HEVC)**        | High Efficiency Video Coding   | ★★★★★   | ★★★★★   | ⚠️ 中等（浏览器支持差） | 高     | 收费（专利多）   | 4K / HDR 视频、高压缩需求      |
| **AV1**                 | AOMedia Video 1                | ★★★★★   | ★★★★★   | ✅ 越来越好        | 很高    | ✅ 开源免费    | YouTube、Netflix、未来标准   |
| **VP9**                 | Google Video Codec             | ★★★★    | ★★★★    | ✅ 好           | 高     | ✅ 免费      | YouTube、Chrome、Android |
| **MPEG-2**              | Moving Picture Experts Group-2 | ★★      | ★★      | ✅ 老设备         | 低     | 有专利       | DVD、旧机顶盒               |
| **MPEG-4 Part 2 (ASP)** | —                              | ★★      | ★★      | ✅ 一般          | 低     | 有专利       | AVI时代（DivX/Xvid）       |
| **WMV / VC-1**          | Windows Media Video            | ★★      | ★★      | ⚠️ Windows 专属 | 中等    | 有专利       | 微软产品（旧）                |
| **H.266 (VVC)**         | Versatile Video Coding         | ★★★★★★★ | ★★★★★★★ | ⚠️ 尚不普及       | 极高    | 收费        | 8K视频、未来标准              |

## 📦 三、压缩效率与文件大小举例（相同画质下）

| 编码格式        | 文件大小（相对） |
| ----------- | -------- |
| MPEG-2      | 100%     |
| H.264       | 50%      |
| H.265       | 25%      |
| AV1         | 20%      |
| VVC (H.266) | 15%      |

也就是说，同一部影片如果用 H.264 编码是 1GB，那么：

- 用 H.265 可以降到 500MB 左右；
- 用 AV1 则可能降到 400MB，画质还更好。

## 🧩 四、编码速度（压缩耗时）对比

| 格式    | 编码速度      | 解码速度        |
| ----- | --------- | ----------- |
| H.264 | 快         | 快           |
| H.265 | 慢         | 稍慢          |
| VP9   | 慢         | 稍慢          |
| AV1   | 非常慢（传统软件） | 中等（硬件支持后变快） |

💡 举例：FFmpeg 用 CPU 压缩一个 1080p 视频

- H.264：1x 实时
- H.265：0.5x
- AV1：0.2x

## 🧰 五、实际使用建议

| 使用场景        | 推荐格式                     | 容器            |
| ----------- | ------------------------ | ------------- |
| 网页播放（兼容性优先） | **H.264 + MP4**          | `.mp4`        |
| 高清影视下载      | **H.265 / AV1 + MKV**    | `.mkv`        |
| 移动端推流（直播）   | **H.264**                | `.flv`、`.ts`  |
| 低码率保存（空间优先） | **AV1 / H.265**          | `.mkv`        |
| 专业影视后期      | **ProRes / DNxHR**（中间格式） | `.mov`        |
| 老设备播放       | **MPEG-2 / H.264**       | `.mpg`、`.avi` |

## 🎬 六、图形总结

```txt
压缩率高 ←——→ 兼容性高
H.266     H.265      AV1      VP9      H.264      MPEG-4      MPEG-2
↑画质好                                ↓旧技术
```

## 🧮 七、简单示例（FFmpeg 转码命令）

```txt
# H.264 编码
ffmpeg -i input.mov -c:v libx264 -preset fast -crf 23 output.mp4

# H.265 编码
ffmpeg -i input.mov -c:v libx265 -preset medium -crf 28 output.mp4

# AV1 编码（速度慢）
ffmpeg -i input.mov -c:v libaom-av1 -crf 30 -b:v 0 output.mkv
```
