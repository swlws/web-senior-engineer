# å¦‚ä½•åˆ¤æ–­é”®ç›˜å¼¹èµ·

## å·¥ç¨‹çº§ã€Œç»Ÿä¸€åˆ¤æ–­æ–¹æ¡ˆã€ï¼ˆå¼ºçƒˆæ¨èï¼‰

ğŸ‘‰ ä¸€å¥—ä»£ç  å…¼å®¹ Android + iOS + WebView

```js
let baseHeight = window.visualViewport?.height || window.innerHeight;

function checkKeyboard() {
  const vvHeight = window.visualViewport?.height;
  const currHeight = vvHeight || window.innerHeight;

  if (baseHeight - currHeight > 100) {
    console.log("é”®ç›˜å¼¹èµ·");
  } else {
    console.log("é”®ç›˜æ”¶èµ·");
  }
}

// Android
window.addEventListener("resize", checkKeyboard);

// iOS
window.visualViewport?.addEventListener("resize", checkKeyboard);
```

ğŸ“Œ 100px æ˜¯ç»éªŒé˜ˆå€¼ï¼Œç”¨æ¥é¿å…ï¼š

- åœ°å€æ å˜åŒ–
- å®‰å…¨åŒºå˜åŒ–

## è¾…åŠ©åˆ¤æ–­ï¼ˆåŠ åˆ†é¡¹ï¼‰

### 1ï¸âƒ£ æ˜¯å¦æœ‰è¾“å…¥æ¡†èšç„¦

```js
const active = document.activeElement;
const isInput = active && /INPUT|TEXTAREA/.test(active.tagName);
```

ğŸ‘‰ å’Œé«˜åº¦å˜åŒ– ä¸€èµ·åˆ¤æ–­ æ›´ç¨³

### 2ï¸âƒ£ orientation æ’é™¤

```js
if (screen.orientation?.type.includes("landscape")) return;
```
