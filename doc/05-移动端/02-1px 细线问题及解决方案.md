# 1px ç»†çº¿é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

## 1. ä¸ºä»€ä¹ˆä¼šå‡ºç° 1px æ˜¾å¾—å®½ï¼ˆçœ‹èµ·æ¥æ˜¯ 2pxï¼‰ï¼Ÿ

æ ¸å¿ƒåŸå› åªæœ‰ä¸€ä¸ªï¼š

æµè§ˆå™¨æ¸²æŸ“æ˜¯åŸºäºç‰©ç†åƒç´ ï¼ˆdevicePixelï¼‰ã€‚CSS 1px åœ¨é«˜ DPRï¼ˆå¦‚ 2 / 3ï¼‰æ‰‹æœºä¸Šä¼šæ˜ å°„åˆ° 2 ï½ 3 ä¸ªç‰©ç†åƒç´ ï¼Œå› æ­¤çœ‹èµ·æ¥æ›´ç²—ã€‚

ä¾‹å¦‚ iPhone çš„ DPRï¼š

| è®¾å¤‡      | DPR | CSS 1px å ç‰©ç†åƒç´  |
| --------- | --- | ------------------ |
| iPhone 8  | 2   | ==2px å®½==         |
| iPhone 12 | 3   | ==3px å®½==         |

æ‰€ä»¥ CSS border:1px æœ¬è´¨ä¸Šæ˜¯ï¼š

- DPR=2 â†’ æ˜¾ç¤ºæˆ 2 ç‰©ç†åƒç´ 
- DPR=3 â†’ æ˜¾ç¤ºæˆ 3 ç‰©ç†åƒç´ 
  â†’ è‚‰çœ¼å°±è®¤ä¸ºè¿™ä¸æ˜¯â€œå‘ä¸çº¿ï¼ˆhairlineï¼‰â€ã€‚

å› æ­¤æˆ‘ä»¬éœ€è¦â€œå¼ºè¡Œè®© CSS æ˜ å°„åˆ° 0.5px æˆ– 0.333pxâ€ã€‚

## æ–¹æ¡ˆä¸€ï¼štransform scale ç¼©æ”¾æ³•ï¼ˆæœ€é«˜å…¼å®¹ï¼‰

åŸç†ï¼šç”¨ 1px çš„å…ƒç´ ï¼Œé€šè¿‡ transform: scaleY(0.5) å‹ç¼©åˆ° 0.5pxï¼ˆæˆ– 1/DPRï¼‰ã€‚

å®ç°ï¼ˆå¸¸ç”¨ä¸‹è¾¹çº¿ï¼‰

```css
.hairline-bottom {
  position: relative;
}

.hairline-bottom::after {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: 1px;
  background-color: #ccc;
  transform: scaleY(0.5);
  transform-origin: 0 0;
}
```

- ğŸ“Œ DPR=2 â†’ scaleY(0.5) â†’ 0.5pxï¼ˆè§†è§‰å‘ä¸çº¿ï¼‰
- ğŸ“Œ DPR=3 â†’ scaleY(0.333) å¯åŠ¨æ€è®¡ç®—

è‡ªåŠ¨æ ¹æ® DPR è®¡ç®—

```css
transform: scaleY(calc(1 / var(--dpr)));
```

JS æ³¨å…¥ï¼š

```js
document.documentElement.style.setProperty("--dpr", window.devicePixelRatio);
```

## æ–¹æ¡ˆäºŒï¼šä¼ªå…ƒç´  + åª’ä½“æŸ¥è¯¢ï¼ˆç»å…¸é«˜ç«¯æ–¹æ¡ˆï¼‰

åŸç†ï¼šé€šè¿‡åª’ä½“æŸ¥è¯¢å°† 1px å˜æˆæ›´å°çš„ pxï¼ˆå¦‚ 0.5pxã€0.333pxï¼‰ã€‚

å†™æ³•

```css
.border-1px {
  position: relative;
}

.border-1px::after {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  border-bottom: 1px solid #ccc;
}

@media (-webkit-min-device-pixel-ratio: 2) {
  .border-1px::after {
    border-bottom-width: 0.5px;
  }
}

@media (-webkit-min-device-pixel-ratio: 3) {
  .border-1px::after {
    border-bottom-width: 0.333px;
  }
}
```

- ğŸ“Œ iOS Safari å®Œç¾æ”¯æŒ
- ğŸ“Œ éƒ¨åˆ†å®‰å“ä¸æ”¯æŒ 0.5px â†’ éœ€è¦ transform è¡¥å……

## æ–¹æ¡ˆä¸‰ï¼šborder-imageï¼ˆåˆ©ç”¨å›¾ç‰‡å®ç°å®Œç¾ 1pxï¼‰

åŸç†ï¼šä½¿ç”¨ 2px æˆ– 3px çš„åˆ‡å‰²çº¿å›¾ç‰‡ï¼Œè®©æµè§ˆå™¨æŒ‰ 1px æ¸²æŸ“ã€‚

css

```css
.border-image-1px {
  border-width: 1px;
  border-image: url(line.png) 2 stretch;
}
```

line.png é€šå¸¸ä¸ºï¼š

- å®½ 2pxï¼ˆDPR2ï¼‰æˆ–å®½ 3pxï¼ˆDPR3ï¼‰
- ç”¨ 1px å¡«æ»¡å›¾ç‰‡è¾¹ç¼˜
- ä¸­é—´é€æ˜

- ğŸ“Œ ä¼˜ç‚¹ï¼šçœŸå® 1pxï¼Œè·¨å¹³å°ç¨³å®š
- ğŸ“Œ ç¼ºç‚¹ï¼šéœ€è¦å‡†å¤‡èµ„æºå›¾

## å„æ–¹æ¡ˆä¼˜ç¼ºç‚¹å¯¹æ¯”

| æ–¹æ¡ˆ                  | ä¼˜ç‚¹                 | ç¼ºç‚¹                 | æ¨èåº¦               |
| --------------------- | -------------------- | -------------------- | -------------------- |
| **transform scale**   | æ— å›¾ã€æœ€é€šç”¨ã€å¼ºå…¼å®¹ | éœ€å†™ä¼ªå…ƒç´            | â­â­â­â­â­ï¼ˆæœ€æ¨èï¼‰ |
| **ä¼ªå…ƒç´  + åª’ä½“æŸ¥è¯¢** | CSS æœ€è¯­ä¹‰åŒ–         | å®‰å“ä¸æ”¯æŒ sub-pixel | â­â­â­â­             |
| **border-image**      | æœ€çœŸå® 1px           | è¦å‡†å¤‡å›¾ç‰‡           | â­â­â­â­             |
| border:0.5pxï¼ˆåŸç”Ÿï¼‰  | ç®€å•                 | å¤šæ•°å®‰å“ä¸æ”¯æŒ       | â­â­                 |
